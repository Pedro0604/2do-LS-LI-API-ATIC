@page "/vehiculos/eliminar/{Id:int?}";
@inject NavigationManager Navigator;
@inject EliminarVehiculoUseCase EliminarVehiculoUseCase;
@inject GetVehiculoUseCase GetVehiculoUseCase;

<ListaVehiculos/>
<Dialogo CerrarDialogo="Cerrar">
  <ConfirmarEliminacion @ref="Confirmar" CerrarDialogo="Cerrar" OnEliminar="Eliminar"/>
</Dialogo>

@code {
    [Parameter] public int Id { get; set; }
    ConfirmarEliminacion? Confirmar {get; set;} = null;
    protected override void OnAfterRender(bool first) 
    {
        var vehiculoEcontrado = GetVehiculoUseCase.Ejecutar(Id);
        if(vehiculoEcontrado != null)
        {
            Confirmar?.AgregarMensaje($"Eliminar al vehículo {vehiculoEcontrado.Dominio}?");
        }
        else
        {
            Confirmar?.AgregarMensaje($"El vehículo de Id {Id} no existe", true);
        }
    }
    void Eliminar(){
            EliminarVehiculoUseCase.Ejecutar(Id);
    }
    void Cerrar()
    { 
        Navigator.NavigateTo("/vehiculos");
    }
}