@page "/polizas/eliminar/{Id:int?}";
@inject NavigationManager Navigator;
@inject EliminarPolizaUseCase EliminarPolizaUseCase;
@inject GetPolizaUseCase GetPolizaUseCase;

<ListaPolizas/>
<Dialogo CerrarDialogo="Cerrar">
    <ConfirmarEliminacion CerrarDialogo="Cerrar" Mensaje=@_mensaje Visible=@(!_hasError)/>
</Dialogo>

@code {
    [Parameter] public int Id { get; set; }
    public string? _mensaje = "";
    public bool _hasError = false;
    protected override void OnInitialized() 
    {
        if(GetPolizaUseCase.Ejecutar(Id) != null)
        {
            _mensaje = $"Eliminar a la póliza {Id}?";
        }
        else
        {
            _mensaje = $"La póliza de Id {Id} no existe";
            _hasError = true;
        }
    }
    void Cerrar(bool eliminar)
    { 
        if(eliminar){
            EliminarPolizaUseCase.Ejecutar(Id);
        }
        Navigator.NavigateTo("/polizas");
    }
}