@inject AgregarTitularUseCase AgregarTitularUseCase;
@inject EliminarTitularUseCase EliminarTitularUseCase;
@inject GetTitularUseCase GetTitularUseCase;

<div>
    <h3>@Mensaje</h3>
    <button class="btn btn-danger" @onclick="()=>Cerrar(true)">Aceptar</button>
    <button class="btn btn-primary" @onclick="()=>Cerrar(false)">Cancelar</button>
</div>

@code{
    [Parameter] public string? Mensaje { get; set; }
    [Parameter] public int Id {get; set;}
    [Parameter] public EventCallback CerrarDialogo{get; set;}
    Titular _titular = new Titular();

    protected override void OnParametersSet() 
    {
        if(Id != 0){
            var titularEcontrado = GetTitularUseCase.Ejecutar(Id);
            if(titularEcontrado != null)
            {
                _titular = titularEcontrado;
                Mensaje = $"Eliminar al titular {_titular.Nombre} {_titular.Apellido}?";
            }
        }
    }
    void Cerrar(bool eliminar){
        if(eliminar){
            EliminarTitularUseCase.Ejecutar(Id);
        }
        CerrarDialogo.InvokeAsync();
    }
}